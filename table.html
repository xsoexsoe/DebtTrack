<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Table - DebtTrack</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/MUSA_panel-table-panel-table.css">
    <link rel="stylesheet" href="assets/css/MUSA_panel-table.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/Drag-Drop-File-Input-Upload.css">
    <link rel="stylesheet" href="assets/css/Hero-Clean-images.css">
    <link rel="stylesheet" href="assets/css/Navbar-With-Button-icons.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Add DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
</head>

<body id="page-top">
    <div id="wrapper">
        <nav class="navbar align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0 navbar-dark" style="background:#9B3790;">
            <div class="container-fluid p-0">
                <a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="index.html">
                    <div><img src="assets/img/โลโก้.png" width="46" height="44" style="margin:0px;padding:0px;display:inline;overflow:visible;"></div>
                    <div class="sidebar-brand-text mx-3"><span class="text-capitalize custom-font" style="font-size: 21px;font-weight: bold;">DebtTrack</span></div>
                </a>
                <hr class="sidebar-divider my-0">
                <div class="text-center d-none d-md-inline"></div>
                <ul class="navbar-nav text-light" id="accordionSidebar">
                    <li class="nav-item"><a class="nav-link active" href="index.html"><svg fill="none" height="1em" style="font-size:19px;" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M21 8.77217L14.0208 1.79299C12.8492 0.621414 10.9497 0.621413 9.77817 1.79299L3 8.57116V23.0858H10V17.0858C10 15.9812 10.8954 15.0858 12 15.0858C13.1046 15.0858 14 15.9812 14 17.0858V23.0858H21V8.77217ZM11.1924 3.2072L5 9.39959V21.0858H8V17.0858C8 14.8767 9.79086 13.0858 12 13.0858C14.2091 13.0858 16 14.8767 16 17.0858V21.0858H19V9.6006L12.6066 3.2072C12.2161 2.81668 11.5829 2.81668 11.1924 3.2072Z" fill="currentColor" fill-rule="evenodd"></path></svg><span class="custom-font" style="font-size: 15.6px;">Home</span></a></li>
                    <li class="nav-item"><a class="nav-link" href="uploadfile.html"><svg class="bi bi-upload" fill="currentColor" height="1em" style="font-size:19px;" viewbox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"></path><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"></path></svg><span class="custom-font" style="font-size: 15.6px;"><strong>Upload File</strong></span></a></li>
                    <li class="nav-item"><a class="nav-link" href="table.html"><i class="fas fa-table" style="font-size: 20px;"></i><span style="font-family: Prompt, sans-serif;font-size: 15.6px;"><strong>รายละเอียดลูกหนี้</strong></span></a></li>
                    <li class="nav-item"><a class="nav-link" href="table.html"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-gps" style="font-size: 20px;">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                            <path d="M12 17l-1 -4l-4 -1l9 -4z"></path>
                        </svg><span style="font-family: Prompt, sans-serif;font-size: 15.6px;"><strong>พิกัดลูกหนี้</strong></span></a></li>
                </ul>
            </div>
        </nav>
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <nav class="navbar navbar-expand shadow mb-4 topbar static-top navbar-light" style="background:linear-gradient(#bc4bb0 0%, #9b3790 100%), #9b3790;">
                    <div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle me-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
                        <ul class="navbar-nav flex-nowrap ms-auto">
                            <div class="d-none d-sm-block topbar-divider"></div>
                            <li class="nav-item dropdown no-arrow">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="d-none d-lg-inline me-2 text-light small">พนักงานบัญชี</span></a>
                                    <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a class="dropdown-item" href="#"><i class="fas fa-user fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Profile</a><a class="dropdown-item" href="#"><i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Settings</a><a class="dropdown-item" href="#"><i class="fas fa-list fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Activity log</a>
                                        <div class="dropdown-divider"></div><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="container-fluid">
                    <h3 class="text-dark mb-4 font">กฟส.เขมราฐ</h3>
                    <div class="card shadow">
                        <div class="card-header"><i class="fas fa-table me-1"></i><span>รายละเอียดลูกหนี้</span></div>
                        <div class="card-body">
                            <table class="table table-hover table-striped table-responsivemy-0 " id="dataTable" role="grid" aria-describedby="dataTable_info">
                                <thead>
                                    <tr style="background: #bd9cf2;border-width: 1px;border-style: dashed;">
                                        <th style="width:5%; border-width: 1px;">กฟฟ.</th>
                                        <th style="width:7%; border-width: 1px;">ชื่อ กฟฟ.</th>
                                        <th style="border-width: 1px;">หมายเลขผู้ใช้ไฟ</th>
                                        <th style="border-width: 1px;">ชื่อ</th>
                                        <th style="border-width: 1px;">ฉบับ</th>
                                        <th style="border-width: 1px;">จำนวนเงิน</th>
                                        <th style="border-width: 1px;">สถานะ</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <script>
                                        // เรียกใช้ Fetch API เพื่อดึงข้อมูลจาก API
                                        fetch('http://localhost:5500/data')
                                        .then(response => response.json()) // แปลงข้อมูลที่ได้จาก API เป็น JSON
                                        .then(data => {
                                            const tableBody = document.getElementById('tableBody'); // อ้างอิงถึงองค์ประกอบ tbody ในตาราง
                                            // วนลูปเพื่อสร้างแถวของตารางจากข้อมูลที่ได้รับ
                                            data.forEach(row => {
                                            const tr = document.createElement('tr'); // สร้างแถวใหม่ในตาราง
                                            tr.innerHTML = `
                                                <td style="border-width: 1px;">${row.id_pea}</td>
                                                <td style="border-width: 1px;">${row.pea_position}</td>
                                                <td style="border-width: 1px;">${row.ca}</td>
                                                <td style="border-width: 1px;">${row.name}</td>
                                                <td style="border-width: 1px;">${row.bill_num}</td>
                                                <td style="border-width: 1px;">${row.bill_amount}</td>
                                                <td style="border-width: 1px;"><a class="btn btn-outline-warning btn-sm d-none d-sm-inline-block" role="button" href="#"><i class="fas fa-edit text-yellow-50 fa-sm"></i>&nbsp;แก้ไข</a></td>
                                            `; // เพิ่มข้อมูลในแถวใหม่
                                            tableBody.appendChild(tr); // เพิ่มแถวใหม่ใน tbody ของตาราง
                                        });
                                        })
                                        .catch(error => console.error('Error fetching data:', error)); // จัดการข้อผิดพลาดกรณีที่ดึงข้อมูลไม่สำเร็จ

                                    </script>
                                    <!-- Data will be populated dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"><span>Copyright © DebtTrack 2024</span></div>
                </div>
            </footer>
        </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/function/table.js"></script>

    <script>
    // Initializing DataTable เมื่อเอกสารถูกโหลดเสร็จสมบูรณ์
$(document).ready(function () {
    $("#dataTable").DataTable(); // เรียกใช้ DataTable บนตารางที่มี id="dataTable"
});
        </script>
</body>

</html>
